# 説明書

当Discord Botは決められた形を持つコマンドによって動きます。  
当BotとのDM（あるいは、公開して問題ないコマンドであれば任意のテキストチャンネル）においてコマンドメッセージを送り、操作を行ってください。  
（決められた形に沿わないメッセージは無視されるか、エラーメッセージを送り返します。）

コマンドは半角のびっくりマーク `!` から始まる英字とアンダースコア `_` からなる文字列です。  
設定系のコマンドではそのあとに **半角** スペースを挟んで設定する文字列を打ち込みます。  
打ち間違えないよう、各章のテンプレートからコピーすることをおすすめします。  
すべてのコマンドの最低限の説明は `!help` コマンドによって得ることができます。

この説明書ではコマンドとゲーム手順を2章に分けて紹介しています。  
ほとんどのプレイヤーは「一般」に述べられるコマンドと手順を知っていればゲームを遊べますが、プレイヤーのうち少なくとも1人は「ゲーム進行」に述べるようなゲームを進行するためのコマンドと手順を知っている必要があります。  
ここでは、ゲーム進行のコマンドを実行するプレイヤーを便宜上「ゲームマスター」と呼びます。

## 一般

### ゲーム手順

1. ゲームマスターによる呼びかけに応じ、 `!join` を送信してゲームに参加します。  
   ゲームから脱退する場合は `!leave` を送信してください。
2. 当Botからの通知メッセージに従い、 `!set_title ほにゃらら` を送信してあなたの本のタイトルを設定します。
3. 当Botからの通知メッセージに従い、 `!set_script ほにゃらら` を送信して誰かの本のXページ目の文章を設定します。これを決められた回数（プレイヤー人数 × 周回数）行います。  
   このとき、通知メッセージによって以下の内容が通知されます。
   - 対象の本のタイトル
   - 今何ページ目か（X）
   - 対象の本の前のページ（X - 1 ページ目）の文章
4. 最後の文章入力が終わりゲームマスターがターンを終了すると、当Botから完成したあなたの本の内容がDMで送られます。  
   音読したり、メモ帳に貼り付けて画面共有をするなどして全員に共有しましょう。

### コマンド一覧

| コマンド内容 | テンプレート |
| - | - |
| ゲーム参加 | `!join` |
| ゲーム脱退 | `!leave` |
| タイトル設定 | `!set_title これはサンプルタイトルです` |
| 文章設定 | `!set_script これはサンプル本文です` |

#### ゲーム参加

`!join`  
- あなたはゲームのプレイヤーに追加されます。以下ゲームのプレイヤーに追加されることを「参加する」と表します。  
  参加したことは全体に公開されたテキストチャンネルで通知されます。
- すでに参加している場合は何も起こりません。

#### ゲーム脱退

`!leave`
- あなたはゲームのプレイヤーから除外されます。以下ゲームのプレイヤーから除外されることを「脱退する」と表します。  
  脱退したことは全体に公開されたテキストチャンネルで通知されます。
- 参加していない場合は何も起こりません。

#### タイトル設定

`!set_title 文字列`
- このコマンドによってあなたの本のタイトルが設定されます。  
  ゲームマスターが本文執筆を開始しないかぎり、何度でも設定し直すことができます。  
  ただし、 **一度送信したメッセージを編集しても何も起こりません。** 設定済みのタイトルを変更したい場合は新たにこのコマンドを送ってください。
- コマンド文字列 `!set_title` のあとに半角スペースを挟んで設定する文字列を打ち込みます。  
  たとえば、「牛穴」というタイトルを設定したい場合のコマンドは以下の通りです。  
  ```
  !set_title 牛穴
  ```
- プレイヤー全員によって（少なくとも1度）タイトルが設定された際には全体に公開されたテキストチャンネルで通知されます。

#### 文章設定

`!set_script 文字列`
- このコマンドによって現在あなたが担当している本のXページ目の文章が設定されます。何ページ目かは直前に当Botによって送られたDMを参照してください。  
  ゲームマスターがこのターンを終了しないかぎり、何度でも設定し直すことができます。  
  ただし、 **一度送信したメッセージを編集しても何も起こりません。** 設定済みの文章を変更したい場合は新たにこのコマンドを送ってください。
- コマンド文字列 `!set_script` のあとに半角スペースを挟んで設定する文字列を打ち込みます。  
  たとえば、「ルポライターは、地味な商売だ。」という文章を設定したい場合のコマンドは以下の通りです。  
  ```
  !set_script ルポライターは、地味な商売だ。
  ```
- （多くの場合そうでしょうが） **複数行を送信する場合** はそのメッセージの中でそのまま改行してください。このとき、 **1行目はコマンド `!set_script` の後に続くことに注意してください。**  
  たとえば、
  > ルポライターは、地味な商売だ。  
  > たいした金にはならないし、危険も多い。  
  > ある日、俺のところに妙なメールが届いた。

  という文章を設定したい場合のコマンドは以下の通りです。  
  ```
  !set_script ルポライターは、地味な商売だ。
  たいした金にはならないし、危険も多い。
  ある日、俺のところに妙なメールが届いた。
  ```
- このコマンドを送信したのち、当BotからのDMで送信された文章の文字数を返します。文字数を考える際の参考にしてください。
- プレイヤー全員によって（少なくとも1度）Xページ目の文章が設定された際には全体に公開されたテキストチャンネルで通知されます。

## ゲーム進行

### ゲーム手順

1. メンバーに呼びかけ、 `!join` によるゲーム参加を促します。自身の `!join` も忘れずに。  
   ゲームから脱退する場合は `!leave` を送信してください。  
   参加しているプレイヤー一覧は `!show_players` によって参照することができ、また `!reset_players` によってすべてのプレイヤーを脱退させることができます。

   また、ゲーム開始前は `!set_cycles` によって周回数（ひとつの本に対し各プレイヤーが何回記入するか）を設定することができます。
2. 当Botからの通知メッセージなどによってプレイヤーが揃ったことを確認し、 `!start_game` によってゲームを開始します。  
   以下、任意のタイミングにおいて、すでに始まっているゲームを `!quit_game` によって強制終了することができます。
3. 当Botからの通知メッセージに従い、 `!set_title ほにゃらら` を送信してあなたの本のタイトルを設定します。
4. 当Botからの通知メッセージと口頭でのやり取りによって全員のタイトル設定が完了したことを確認し、 `!start_script` によって本文執筆に移行します。
5. 当Botからの通知メッセージに従い、 `!set_script ほにゃらら` を送信して誰かの本のXページ目の文章を設定します。  
   このとき、通知メッセージによって以下の内容が通知されます。
   - 対象の本のタイトル
   - 今何ページ目か（X）
   - 対象の本の前のページ（X - 1 ページ目）の文章
6. 当Botからの通知メッセージと口頭でのやり取りによって全員のXページ目の文章設定が完了したことを確認し、 `!next_turn` によって次のページの執筆に移行します。
7. 5～6を決められた回数（プレイヤー人数 × 周回数）行います。最後の `!next_turn` ののち、ゲームが終了します。
8. 当Botから完成したあなたの本の内容がDMで送られます。  
   音読したり、メモ帳に貼り付けて画面共有をするなどして全員に共有しましょう。

### コマンド一覧

| コマンド内容 | テンプレート |
| - | - |
| 参加者一覧表示 | `!show_players` |
| 参加者リセット | `!reset_players` |
| 周回数設定 | `!set_cycles 1` |
| ゲーム開始 | `!start_game` |
| ゲーム強制終了 | `!quit_game` |
| 本文執筆開始 | `!start_script` |
| ターン終了 | `!next_turn` |

#### 参加者一覧表示

`!show_players`  
- 現在のゲーム参加者一覧をDMにより送信します。

#### 参加者リセット

`!reset_players`
- ゲーム参加者をリセットします。つまり、このコマンドの実行後には誰も参加していない状態になります。
- 参加者がリセットされたことは全体に公開されたテキストチャンネルで通知されます。

#### 周回数設定

`!set_cycles`
- 周回数（ひとつの本に対し各プレイヤーが何回記入するか）を設定します。  
  たとえば、2周に設定されており、ゲーム参加者が3人の場合、（ひとつの本に対し各プレイヤーが2回記入するため）それぞれの本は6ページになります。
- コマンド文字列 `!set_cycles` のあとに半角スペースを挟んで設定する周回数を打ち込みます。  
  たとえば、2周する設定にしたい場合のコマンドは以下の通りです。  
  ```
  !set_cycles 2
  ```

- 設定可能な周回数の上限は10です。これを超えた周回数を指定するか、数字以外の文字を指定するとエラーメッセージを返します。
- 現在の周回数設定が明らかでない場合、このコマンドを打ち込んで明示的に設定しておくことをおすすめします。

#### ゲーム開始

`!start_game`
- 現在設定されているゲーム参加者および周回数でゲームを開始し、タイトル設定のフェーズに入ります。  
- このコマンドの実行後、即座に参加者全員に案内のDMが送られます。

#### ゲーム強制終了

`!quit_game`
- 現在進行中のゲームを強制終了します。

#### 本文執筆開始

`!start_script`
- 現在設定されているそれぞれの本のタイトルを確定して本文執筆フェーズに入ります。
- ゲーム参加者全員によるタイトルの設定が完了していない場合エラーメッセージを返します。
- このコマンドの実行後、即座に参加者全員に各自の本の1ページ目を執筆する案内のDMが送られます。


#### ターン終了

`!next_turn`
- 現在設定されているそれぞれの本のXページ目の文章を確定して次のページに移ります。現在のページが最後のページである場合ゲームを終了して全員に完成した本の内容をDMで送ります。
- ゲーム参加者全員によるXページ目の文章の設定が完了していない場合エラーメッセージを返します。
- 現在のページが最後のページである場合を除き、このコマンドの実行後、即座に参加者全員に以下の内容を含む案内のDMが送られます。
  - 対象の本のタイトル
  - 今何ページ目か（X）
  - 対象の本の前のページ（X - 1 ページ目）の文章
